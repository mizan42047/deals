(window.CTIWidgetClientJsonp=window.CTIWidgetClientJsonp||[]).push([[5],{PhSE:function(e,t,i){"use strict";function s(e,t,i){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.r(t),i.d(t,"default",(function(){return r}));var o=i("VqHt");const n=["user_id","name"];class r{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window;s(this,"opt",{}),s(this,"apiFnName","ChativeApi"),s(this,"queueEventName",void 0),s(this,"scope",window),s(this,"frameWindow",void 0),s(this,"initialQueue",[]),this.opt=t||this.opt,this.scope=n||this.scope,this.frameWindow=e,this.apiFnName=Object(o.b)(i),this.queueEventName=Object(o.c)(i),this.registerNewHandler(),this.cleanupFuncQueue()}trigger(e,t){e&&this.frameWindow.apiEventHandler.executeEvent(e,t)}registerNewHandler(){this.initialQueue=this.initialQueue.concat(this.scope[this.queueEventName]||[]),this.scope[this.apiFnName]=(e,t)=>{this.performAction(e,t)}}cleanupFuncQueue(){if(this.initialQueue&&this.initialQueue.length)for(const e of this.initialQueue)this.performAction(e[0],e[1])}performAction(e,t){if(this.frameWindow)if("boot"===e)this.opt.boot&&this.opt.boot(t);else if("shutdown"===e)this.opt.shutdown&&this.opt.shutdown();else if("openChatWindow"===e)this.opt.opener&&this.opt.opener();else if("closeChatWindow"===e)this.opt.closer&&this.opt.closer();else if(["showLauncher","hideLauncher"].includes(e))this.opt.launcher&&this.opt.launcher();else if("destroy"===e)this.opt.destroyer&&this.opt.destroyer();else if("hide"===e)this.opt.hide&&this.opt.hide();else if("show"===e)this.opt.show&&this.opt.show();else if("updateDraftMessage"===e)this.opt.updateDraftMessage&&this.opt.updateDraftMessage(t.text);else if("addEventListener"===e)this.opt.addEventListener&&this.opt.addEventListener(t);else if("removeEventListener"===e)this.opt.removeEventListener&&this.opt.removeEventListener(t);else if("updateSettings"===e)this.opt.updateSettings&&this.opt.updateSettings((e=>(["showBsBranding","enableWidgetApi"].forEach((t=>{delete e[t]})),e))(t));else if("updateForceSettings"===e)this.opt.updateForceSettings&&this.opt.updateForceSettings(t);else if(["updateUser","updateWidget"].includes(e)&&"object"==typeof t&&t.constructor===Object){const i=function(e,t){if(null==e)return{};var i,s,o=function(e,t){if(null==e)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.includes(s))continue;i[s]=e[s]}return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)t.includes(i=n[s])||{}.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}(t,n);this.frameWindow.updateFrame([e,i]),this.frameWindow.updateFrameData([e,i])}}}}}]);